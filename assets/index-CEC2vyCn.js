(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const u=(t,e)=>{localStorage.setItem(t,JSON.stringify(e))},l=t=>JSON.parse(localStorage.getItem(t)),m=t=>{const e=document.createElement("li");e.classList.add("pokemon-card");const n=document.createElement("h3");n.textContent=t.name;const r=document.createElement("p");r.textContent=`Height: ${t.height}`;const o=document.createElement("p");o.textContent=`Weight: ${t.weight}`;const s=document.createElement("p");s.textContent=`Type(s): ${t.types.map(y=>y.type.name).join(", ")}`;const a=d(t.sprites.front_default),c=d(t.sprites.front_shiny);c.style.display="none";let i=!0;return e.addEventListener("click",()=>{i=!i,i?(c.style.display="none",a.style.display="block"):(c.style.display="block",a.style.display="none")}),e.append(n),e.append(a),e.append(c),e.appendChild(r),e.appendChild(o),e.appendChild(s),e},d=t=>{const e=document.createElement("img");return e.src=t,e.alt="pokemon-image",e.id="random",e.classList.add("image"),e},p=()=>{const t=document.querySelector("#search-list");t.innerHTML="",(l("searchedPokemon")||[]).forEach(n=>{const r=m(n);t.append(r)})},g=async t=>{t.preventDefault();const e=document.querySelector("#pokemon-search").value.trim().toLowerCase();if(!e){alert("Please enter a Pokémon name.");return}const n=await h(e);if(n){const r=l("searchedPokemon")||[];r.find(o=>o.name===n.name)||(r.push(n),u("searchedPokemon",r)),p()}else alert("Pokémon not found.")},f=async(t,e={})=>{try{const n=await fetch(t,e);if(!n.ok)throw new Error(`Fetch failed. ${n.status} ${n.statusText}`);return[(n.headers.get("content-type")||"").includes("application/json")?await n.json():await n.text(),null]}catch(n){return console.error(n.message),[null,n]}},h=async t=>{const e=l(t);if(e)return console.log(`Fetched ${t} from local storage.`),e;const n=`https://pokeapi.co/api/v2/pokemon/${t}`,[r,o]=await f(n);return o?(console.error(`Cannot fetch details for ${t}`),null):(u(t,r),r)},P=async()=>{const t="https://pokeapi.co/api/v2/pokemon/?&limit=20",[e,n]=await f(t);if(n){console.error("Cannot fetch names");return}const r=e.results,o=document.querySelector("#fetch-cards");r.forEach(async s=>{try{const a=await h(s.name),c=m(a);o.append(c)}catch{console.warn("Failed to fetch Pokémon details for",s.name)}})};document.querySelector("#search-bar").addEventListener("submit",g);p();P();
